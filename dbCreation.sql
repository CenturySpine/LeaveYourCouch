DECLARE @CurrentMigration [nvarchar](max)

IF object_id('[dbo].[__MigrationHistory]') IS NOT NULL
    SELECT @CurrentMigration =
        (SELECT TOP (1) 
        [Project1].[MigrationId] AS [MigrationId]
        FROM ( SELECT 
        [Extent1].[MigrationId] AS [MigrationId]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = N'LeaveYourCouch.Mvc.Migrations.Configuration'
        )  AS [Project1]
        ORDER BY [Project1].[MigrationId] DESC)

IF @CurrentMigration IS NULL
    SET @CurrentMigration = '0'

IF @CurrentMigration < '201903081505579_InitialCreate'
BEGIN
    CREATE TABLE [dbo].[AspNetRoles] (
        [Id] [nvarchar](128) NOT NULL,
        [Name] [nvarchar](256) NOT NULL,
        CONSTRAINT [PK_dbo.AspNetRoles] PRIMARY KEY ([Id])
    )
    CREATE UNIQUE INDEX [RoleNameIndex] ON [dbo].[AspNetRoles]([Name])
    CREATE TABLE [dbo].[AspNetUserRoles] (
        [UserId] [nvarchar](128) NOT NULL,
        [RoleId] [nvarchar](128) NOT NULL,
        CONSTRAINT [PK_dbo.AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId])
    )
    CREATE INDEX [IX_UserId] ON [dbo].[AspNetUserRoles]([UserId])
    CREATE INDEX [IX_RoleId] ON [dbo].[AspNetUserRoles]([RoleId])
    CREATE TABLE [dbo].[AspNetUsers] (
        [Id] [nvarchar](128) NOT NULL,
        [Email] [nvarchar](256),
        [EmailConfirmed] [bit] NOT NULL,
        [PasswordHash] [nvarchar](max),
        [SecurityStamp] [nvarchar](max),
        [PhoneNumber] [nvarchar](max),
        [PhoneNumberConfirmed] [bit] NOT NULL,
        [TwoFactorEnabled] [bit] NOT NULL,
        [LockoutEndDateUtc] [datetime],
        [LockoutEnabled] [bit] NOT NULL,
        [AccessFailedCount] [int] NOT NULL,
        [UserName] [nvarchar](256) NOT NULL,
        CONSTRAINT [PK_dbo.AspNetUsers] PRIMARY KEY ([Id])
    )
    CREATE UNIQUE INDEX [UserNameIndex] ON [dbo].[AspNetUsers]([UserName])
    CREATE TABLE [dbo].[AspNetUserClaims] (
        [Id] [int] NOT NULL IDENTITY,
        [UserId] [nvarchar](128) NOT NULL,
        [ClaimType] [nvarchar](max),
        [ClaimValue] [nvarchar](max),
        CONSTRAINT [PK_dbo.AspNetUserClaims] PRIMARY KEY ([Id])
    )
    CREATE INDEX [IX_UserId] ON [dbo].[AspNetUserClaims]([UserId])
    CREATE TABLE [dbo].[AspNetUserLogins] (
        [LoginProvider] [nvarchar](128) NOT NULL,
        [ProviderKey] [nvarchar](128) NOT NULL,
        [UserId] [nvarchar](128) NOT NULL,
        CONSTRAINT [PK_dbo.AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey], [UserId])
    )
    CREATE INDEX [IX_UserId] ON [dbo].[AspNetUserLogins]([UserId])
    ALTER TABLE [dbo].[AspNetUserRoles] ADD CONSTRAINT [FK_dbo.AspNetUserRoles_dbo.AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [dbo].[AspNetRoles] ([Id]) ON DELETE CASCADE
    ALTER TABLE [dbo].[AspNetUserRoles] ADD CONSTRAINT [FK_dbo.AspNetUserRoles_dbo.AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[AspNetUsers] ([Id]) ON DELETE CASCADE
    ALTER TABLE [dbo].[AspNetUserClaims] ADD CONSTRAINT [FK_dbo.AspNetUserClaims_dbo.AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[AspNetUsers] ([Id]) ON DELETE CASCADE
    ALTER TABLE [dbo].[AspNetUserLogins] ADD CONSTRAINT [FK_dbo.AspNetUserLogins_dbo.AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[AspNetUsers] ([Id]) ON DELETE CASCADE
    CREATE TABLE [dbo].[__MigrationHistory] (
        [MigrationId] [nvarchar](150) NOT NULL,
        [ContextKey] [nvarchar](300) NOT NULL,
        [Model] [varbinary](max) NOT NULL,
        [ProductVersion] [nvarchar](32) NOT NULL,
        CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
    )
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201903081505579_InitialCreate', N'LeaveYourCouch.Mvc.Migrations.Configuration',  0x1F8B0800000000000400DD5CDB6EE336107D2FD07F10F4D416A9954B77B10DEC2E52276983E68675B6689F16B4443BC24A9456A2B2098A7E591FFA49FD850E25EAC68B2EB6623B8B051616393C331C0EC9E17098FFFEF977FCF6D1F78C071CC56E4026E6C168DF3430B103C725CB8999D0C5F76FCCB73F7DFDD5F8CCF11F8DDF73BA2346072D493C31EF290D8F2D2BB6EFB18FE291EFDA5110070B3AB203DF424E601DEEEFFF681D1C5818204CC0328CF1BB8450D7C7E9077C4E0362E39026C8BB0A1CECC5BC1C6A6629AA718D7C1C87C8C613F312A307FC679044D320B1EF47570FF6286B641A279E8B40A019F616A681080928A220EEF1FB18CF681490E52C8402E4DD3D8518E816C88B31EFC67149DEB547FB87AC4756D93087B29398067E4FC08323AE224B6CBE92A2CD4285A0C43350367D62BD4E1539312F1C9C16BD0B3C5080C8F078EA458C78625E152C4EE2F01AD351DE7094419E4700F739883E8EAA887B46E7767B85491D8EF6D9BF3D639A783489F084E08446C8DB336E93B9E7DABFE1A7BBE0232693A383F9E2E8CDABD7C8397AFD033E7A55ED29F415E86A0550741B05218E4036BC28FA6F1A56BD9D25362C9A55DA645A015B82D9611A57E8F1129325BD877973F8C634CEDD47ECE425DCB8DE1317261334A251029FD789E7A1B9878B7AAB9127FBBF81EBE1ABD78370BD460FEE321D7A813F4C9C08E6D53BECA5B5F1BD1B66D3AB36DE1F38D97914F8ECBB6E5F59ED8719CC589B7526D092DCA16889695DBAB1551A6F27936650C39B758EBAFBA6CD2495CD5B49CA3AB4CA4CC8596C7A36E4F23E2FDFCE167712863078A969318D34199C76CF1A09207B864C5A1AD241574322D0C12F795D3CF391EB0DB03076E002AEC9C28D7C5CF4F2E700CC1091DE32DFA2388675C1F915C5F70DA2C3CF01449F613B89C05C6714F9E1B373BBBD0F08BE4EFC399B059BE335D8D0DC7D0ECE914D83E88CB0566BE35D06F6C720A167C4394514BFA7760EC83EEF5CBF3BC020E29CD8368EE3733066ECC0AA42680E7841E8D1616F38B64E6DDB31997AC8F5D59E89B0A27EC8494BEF444D2179281A329597D224EA65B0744937517352BDA81945ABA89CACAFA80CAC9BA49C522F684AD02A67463598DF978ED0F08E5F0ABBFB9EDF7A9BB76E2DA8A871062B24FE05131CC132E6DC224A7144CA11E8B26E6CC35948878F317DF6BD29E5F43BF292A159AD341BD24560F8D990C2EEFE6C48C584E207D7615E4987E3504E0CF09DE8D527ADF6392748B6E9E950EBE6A6996F660DD04D9793380E6C379D058A40180F63D4E5071FCE688F6964BD11E322D0313074976D7950027D3345A3BA21A7D8C3141B277616289CA2D8468EAC46E890D343B07C47550856C647EAC27D27F1044BC7116B84D821288699EA122A4F0B97D86E88BC562D092D3B6E61ACEF050FB1E61487983086AD9AE8C25C1D0E6102147C844169D3D0D8AA585CB3216ABC56DD98B7B9B0E5B84B518A8DD8648BEFACB14BEEBF3D8B61366B6C03C6D9AC922E0268437BDB30507E56E96A00E2C165D70C543831690C94BB541B31D0BAC6B660A07595BC3803CD8EA85DC75F38AFEE9A79D60FCA9BDFD61BD5B505DBACE963C74C33F33DA10D85163892CDF374CE2AF123551CCE404E7E3E8BB9AB2B9A08039F615A0FD994FEAED20FB59A4144236A022C0DAD05945F0A4A40D284EA215C1ECB6B948E7B113D60F3B85B232C5FFB05D88A0DC8D8D5CBD10AA1FE0A5534CE4EA78FA26785354846DEE9B050C1511884B878D53BDE4129BAB8ACAC982EBE701F6FB8D2313E180D0A6AF15C354ACA3B33B89672D36CD792CA21EBE392ADA525C17DD26829EFCCE05AE236DAAE248553D0C32D584B45F52D7CA0C996473A8ADDA6A81B5B59EA142F185B9A1CABF1150A43972C2B3957BCC498650957D3EF67FD5390FC0CC3B263452652216DC18906115A62A1165883A4E76E14D35344D11CB138CFD4F12532E5DEAA59FE7396D5ED531EC47C1FC8A9D96F1EBDD35EE5D7B65CD927E150E7D0519F393669345D6106EAE6064B85431E8A1401FC69E0253ED1FB59FAD6D9355EB57D5622238C2D417EC98F92942679BBF511E8343EF2DC1876AC0A6F66F5F1D243E8B49EFBA255BDEBFC533D4A1EAEAAA2E842585B1B3F9D5BB3CA98898E63FF216B45789E59C6B355AA00BCA8274625E14102ABD47547ADE7A45431EB35DD1185C4932AA450D543CA6A7A494DC86AC54A781A8DAA29BA7390134AAAE8726D7764456A49155A51BD02B64266B1AE3BAA22FBA40AACA8EE8E5DA6A2886BE90EEF63DAE3CCBA1B5976F05D6F27D3603CCFC238CC4658B9DFAF02558A7B62F11B7C098C97EFA451694F7FEB1A5516F658CFA83418FA75A876415E5F861A6FF5F598B55BEFDA52DF74EBAFC7EB67BACF6A20D219502429B8176741E1CC37E6E7AFF6C737D2812C23318D5C8DB0CD3FC514FB2346309A7DF2A69E8BD9A29E135C21E22E704CB34C0FF370FFE05078B8B33B8F68AC38763CC5F955F792A63E661B48DA220F28B2EF5124A750ACF1D0A40495A2D317C4C18F13F3AFB4D5711AE860BFD2E23DE3227E4FDC4F0954DC450936FE9653428749BCEFF0D4A310F4EF17F186A2BBCA2FFEF89035DD336E22984EC7C6BEA0E85586BFFEB2A2973459D335A459F9BDC5CB9D6DB5E70B4A5461B6ACFE5A61EED2415E2AE4527EE3A3C76FFB8AA67C8DB016A2E2C5C1507883A850F7A260152CED6B02073E69FA9AA05F67D5AF0B56114DFBB2C025FDC1C47705DD97A1BCE516F721C5B969134B52AAE7D6BCECB59234B7BD3749E9DB6B4D743945BB07DCA069D8EBB9282F2CBD79B0AD5391BD3C18F636EDFED9539677254BB974DAB79B9CBCC97CE4865BA62F2A0D790712E7148940DB4F36DEB4ADE902C13B9EB1D92FA578C78C8D6FF3DB4F1CDEB4B1E902C43B6E6CBDD28377CCD6B6B57F6ED9D23A6FA15B4FF695F39634173AAA28725B326F167287E3FF3C0023C83CCAEC0DA63A7BAC29F3B5856149A267AA4F5B13194B1347E22B5134B3EDD757BEE1377696D334B3D5247B36F1E6EB7F236F4ED3CC5B9342B98D34646512A32A35BC651D6BCAA97A4969C7B59EB464B9B7F9AC8DB7F32F29CB7810A5D4668FE676F9E524150FA29221A74E8F2462F9A218F6CECADF7284FD3B76972504FBCB8E04DBB55DB3A0B9208B20DFBC05897212214273852972604B3D89A8BB4036856A16804E1F91A7413D760D32C7CE05B949689850E832F6E75E2DE0C59C8026FE69A6745DE6F14DC8BEE221BA0062BA2C707F437E4E5CCF29E43E57C4843410CCBBE0E15E369694857D974F05D275403A0271F5154ED11DF6430FC0E21B32430F7815D9C0FC2EF112D94F65045007D23E1075B58F4F5DB48C901F738CB23D7C820D3BFEE34FFF03DC3209ADD2540000 , N'6.2.0-61023')
END

IF @CurrentMigration < '201903111439345_AddUserInfo01'
BEGIN
    ALTER TABLE [dbo].[AspNetUsers] ADD [FirstName] [nvarchar](max)
    ALTER TABLE [dbo].[AspNetUsers] ADD [PostalCode] [nvarchar](max)
    ALTER TABLE [dbo].[AspNetUsers] ADD [Pseudo] [nvarchar](max)
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201903111439345_AddUserInfo01', N'LeaveYourCouch.Mvc.Migrations.Configuration',  0x1F8B0800000000000400DD5C5B6FE3B8157E2FD0FF20E8A92DB2562E9DC134B0779175926DD0DC30CE2CDAA7012DD18E3012A595A86C82627F591FFA93FA174A4A94CCAB44D9F2258B051663F2F03B171E92874787F9DF7FFE3BFEE1358E9C1798E5618226EEC9E8D87520F2932044CB895BE0C5779FDC1FBEFFE31FC65741FCEAFC5CD39D513A3212E513F719E3F4DCF372FF19C6201FC5A19F2579B2C0233F893D1024DEE9F1F1DFBC93130F1208976039CEF873817018C3F207F9394D900F535C80E82E096094B376D2332B519D7B10C33C053E9CB8B710BCC07F2545364D0AFF7974F7E28FAA41AE73118580083483D1C2750042090698887BFE2587339C2568394B4903889EDE5248E81620CA2153E37C456EABD1F129D5C85B0DACA1FC22C749DC13F0E48C99C89387AF6568B7312131E21531367EA35A97869CB837012C9B3E27113180CCF07C1A659478E2DE352C2EF2F41EE2513D7054415E6704EED724FB36E2118F1CEB71478D4B9D8E8EE97F47CEB4887091C1098205CE4074E43C16F328F4FF01DF9E926F104DCE4EE68BB34F1F3E82E0ECE35FE1D9075E53A22BA1131A48D36396A43023B2C145A3BFEB78E2384F1ED80CE3C6545621BE445687EBDC81D75B8896F899AC9BD34FAE731DBEC2A06E61CEF5058564319141382BC8CFFB228AC03C824DBFD7CA93FEBF85EBE9878F8370BD072FE1B29C7A893F59381959579F6154F6E6CF615A2D2F61BEBF32B2EB2C89E96FD1BFAADEAF33B2627DAA4C62247902D9126251BAB1B7725E2B97A650C3BB758D7AF8AE4D2555DD5B4B4A155A6725D42C76BD1A6A79B7CBD7DAE32ED2944C5EE95AD4226D0E673CB34612C891A392AE1CE9C4D6911051F0F7BC2F5E87598E3B3647F24F2BD6ED9C1E931C83684AE8B7CF2A8745906C9DCD550CC2688043C5820B09EB166116C3C6437E4CC81206A8F77C3F823C277B6AF077903F6FDD4033E8171959EA330CE274FBB3FE9C20785FC473BA83EC8ED76053F3F46B720D7C9C6457888EDA18EF36F1BF2505BE42C125C0F00BF66B40FAF3298CED010611E7C2F7619E5F13678601D99111AE016F103E3BED0D47F7F87D0775D30884B13EAA934EA3AF35E92AB2D35328D19D814C17E1B5897A9B2C4364276A4D6A16B5A2E8149591F5159582D949CA28CD8296049D72565483C5CCE50C0D1F3497B0871F356F16F898F602CE8C33B243C29F208219D9C682478031CCD06A066CF68D7D045AE5F451A65B3F9B4A4E3F83A8189AD55AABA1DC04865F0D25ECE1AF86524CD2FC1206342AB1B84AD6C404DE8A5E7F4BED5E739264BB5E0E829ABB66BE9B3DC0B45C2EF23CF1C372156892882C0524CA4F6238A73B1F546923E7948862C4D1437AE49116A29B2B3BD503BA8411C4D0B9F0AB24EB14E43E0854331285821E82D527AA46B0556E4914EE2F0A4FE2E930A383E8DD11E564A58608ABCB22447E9882A8D34AD248CB238CEADEF0907B2E610A1165D869091BE6FA541215A0E1234D4A9785C61EE771ED8E68885A4D73DE15C2AEE65DC9F0ECC4273B6267835FB2F86D2B8ED96EB11D3867BB496C0430A645F7E1A0ECAE62EB00F2C5E5D01C54BA31191C9485543B7150D1627B7050D124EFCE41AB2BAAEDFC4BF7D543734FF1A2BCFB63BDD55C7BF04DC11E07E69A55EC49C660320266AA7B5ECE69277CC59ACB199193DDCF7216EACA2E42C167108B299B55BCAB8D43BD7610D989DA00578ED601CA3EA82A40CA82EA215C9DCB6B958E45113D60EBBC5B2B2CDBFB2558CE07546CFEC3324768FEFC2C3BA7D5EDA3D1ACF106C5C9AD2E0B1C8EC621E4CD4B54DCC228A6BCAC6A189B58B84F34CC29C626A3C5401D91ABC148B532835BA976CD6E2BE902B23E21D9465692C22783956A6506B712F3D16E236982821E61C14626128FF081165B9DE9684E9BA66FEC556567AC61EC19EAD3C677204D43B4E4EAD5588B33AB8AD5A6DFCDFA976FC51586E7E79A2AAE46DA86134E32B084522F614D242DBF935F020CE680E679A641AC9069CF56C3F65FB3E48F4F7512EB73A0A6A6FF66D93B63198470E4AA310983BA268AC634B029B3E91A37D00F776819218840A649E04F93A8889139CE328FAE3EE3F1E3AB161561EC49F22B7194623425DA1567C06A7ED4B531EC5C35D1CCFAF365863059BD8E4579BB9BE253334A9DAEE2514C29ACBDCD9F29AC5967CEE4C0B1FF9475226C679571953E3C08D76C8FC5D7F2F0607C7B0F3456AE2320B1367B14568DC383B0A69E185C418702C6F5F5D04FA8B911B4147AEC11A5C21A1E52EAEA21255F3E2308C977AC8567B0A89EC29E835A30C3A3ABBDF6C89AD2191E5AD3BD06B64666B9CF1E55535DC3036BBAEDB157A536F25971C0E7B4F1BAB6E9415D5DEC373BA90D18DBD9F88739E8B9FA051E886BEE89C52A141430D67E904E65BCDD6EEA54555A6733A7326098F721A10040DC865AAB16CC98C2577D61AB6FAB6A30E3F573DDAD3A8872C795491AEECD5D57BAD38ED9FDB2FB619672E1AC485CA7362339E6DF720CE3112518CD7E89A65108E9A65E13DC01142E608EAB4A16F7F4F8E4547AD475380FACBC3C0F22CDFDDCF4CA4A9CB31D14A5A11790F9CF20534B44367884B40255B2EF372880AF13F7DFE5A8F3329143FF55361F3937F91714FE52908EA7AC80CE6F6AC9EB308F322C9E013582FEF62EDED7D89BFCE69F5FABA147CE434696D3B9732C197A9DE9175FDDF492A61ABA81346BBFC579BFAB4D79DA5223FF2906AF7FE6E1D67BBEB2199CF044652328E1198AD67AD2AEB0FEAB937988077971B291BEDA57259B4D86FA726428BC414C687A19B20E96F15548407EE2F255483F65F5AF44D611CDF8422444FDC1E4F721F6DB6D3D728FE7ADE67EB88BADB7B473677DFD46C5B6FB3E839532FC8D16BA5A6ADF036ED072FACD42B17756A63E5888A0A9421F0C7B9F7EBFF5D2F343A9365F5D4EF65B64BECBBAF296AF85BFAB72F2032880D41474EDBF687CD7BE664A781F78E56DBFD2F003733676CCEFBF007CD7CE664A841FB8B3F52AF33E305FDBD7F9B9674FB33E42F75EB4ADD69F193E5CE9B2E55D45D9D5A70572FD9FD36C541551566F69F555806D15CC1D0C572466A6E6F24399B1B27014BE0A453BDB7EBAB203BF555946D3CED650B4DBC69BEDFFADBC194D3B6F4329EC3ECAC9B5C5A8BA12FF8E7DACAD36EE3D958F0B9A74BC56E88A595BAB10DE53B5F8204611568FE12BFAFB290E1FC424432E9D1EC5E0EA07717276727FCF949CDF79B85C41D0BF6E8AA02F9C9A0DCD0D5A24F5E12D49549348199A3B8841408ED48B0C870BE063D24D13D0E51F0328937AF433C81C0637E8A1C0698189CA309E4742C28B06016DFCCB8A7751E6F1434A7FE543A840C40C69E2FE01FD588451D0C87DADC90919206874C1D2BD742E314DFB2EDF1AA4FB04590231F33541D1138CD38880E50F68065EE03AB211F7BB854BE0BFAD32802690EE8910CD3EBE0CC1320371CE3056E3C94FE2C341FCFAFDFF01D054AD20D6570000 , N'6.2.0-61023')
END

